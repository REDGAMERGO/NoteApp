<!DOCTYPE html>

<html lang="en" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin-page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="/static/common.css" type="text/css"/>

</head>
<body style="background: #FFCA73">

<!--Тело-->
<div class="container-fluid">

    <div class="row no-gutters">
        <div  class="col"></div>
        <div  class="col-auto">
            <div class="navbar-wrap">
                <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm nav-panel" style="width: 1300px; color: #6E6363;">
                    <a class="navbar-brand">NoteApp</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div sec:authorize="isAuthenticated()" class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="/main">Статистика</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/main">Запросы</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/admin/categories">Жанры</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/main">Метки</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/main">Игры</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/main">Пользователи</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/main">Разработчики</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/main">Издатели</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/main">Профиль</a>
                            </li>
                        </ul>
                        <div class="navbar-text mr-3">Администратор</div>
                        <form th:action="@{/logout}" method="post">
                            <button class="btn btn-sm btn-outline-danger" type="submit" style="width: 80px">Выход</button>
                        </form>
                    </div>

                </nav>
            </div>
        </div>
        <div  class="col"></div>
    </div>

    <div class="row no-gutters" style="padding-top: 30px">
        <div class="col" style="width: 200px;"></div>
        <div class="col-auto">
            <div class="desk-wrap shadow-sm">

                <!--Список игр-->

                <h4 class="display-4">Элементы категорий</h4>
                <div sec:authorize="isAuthenticated()" style="text-align: right;margin-right: 20px;">
                <span class="btn btn-outline-primary disabled"><span style="color: black">Вы вошли как: <b><span
                        sec:authentication="name"></span></b></span>&nbsp;&nbsp;<span><a class="btn btn-primary"
                                                                                         th:href="@{/main}">Главная страница</a></span>&nbsp;&nbsp;<span><a
                        class="btn btn-primary"
                        th:href="@{/logout}">Выход</a></span></span>
                </div>
                <div align="left" style="margin-bottom:20px"><a class="btn btn-primary" th:href="@{/admin}">Назад</a> <a
                        class="btn btn-primary" th:href="@{/admin/items/add}">Создать</a></div>
                <div align="left" style="margin-bottom:20px">
                    <form class="form-inline" method="GET" th:action="@{/admin/items}" th:object="${ctgSel}">
                        <div class="form-group">
                            <label for="category">Выберите категорию: </label>&nbsp;&nbsp;
                            <select class="form-control selectpicker" data-size="10" id="category" name="selcat">
                                <option th:value="0">(по-умолчанию)</option>
                                <option data-divider="true"></option>
                                <option th:each="category : ${categories}"
                                        th:text="${category.getName()}"
                                        th:value="${category.getId()}">Category
                                </option>
                            </select>
                        </div>
                        <button class="btn btn-primary" type="submit">OK</button>
                        &nbsp;&nbsp;&nbsp;&nbsp;-->&nbsp;&nbsp;&nbsp;&nbsp;
                        <span th:text="'(выбранная категория: ' + ${currentCategory.toLowerCase()} +')'"></span>
                    </form>
                </div>
                <table class="table table-hover">
                    <tr>
                        <th>Номер</th>
                        <th>Изображение</th>
                        <th>Артикул</th>
                        <th>Название</th>
                        <th>Описание</th>
                        <th>Количество</th>
                        <th>Цена</th>
                        <th>Категория</th>
                        <th>Статус</th>
                        <th></th>
                        <th></th>
                    </tr>
                    <tr th:each="item,index : ${items}">
                        <td th:utext="${index.count}">...</td>
                        <td><img height="70" th:src="@{'data:image/jpeg;base64,'+${item.getImageString()}}" width="70"/>
                        </td>
                        <td th:utext="${item.getArticul()}">...</td>
                        <td th:utext="${item.getName()}">...</td>
                        <td th:utext="${item.getDescription()}">...</td>
                        <td th:utext="${item.getCount()}">...</td>
                        <td th:utext="${item.getPrice()}">...</td>
                        <td th:utext="${item.getCategoryName()}">...</td>
                        <td><span th:if="${item.status}">Товар виден всем</span>
                            <span th:if="${!item.status}">Товар не отображается</span></td>
                        <td><a class="btn btn-success"
                               th:href="@{/admin/items/{id}/edit(id=${item.getId()})}">Редактировать</a>
                        </td>
                        <td><a class="btn btn-danger"
                               th:href="@{/admin/category/{c_id}/items/{i_id}/delete(c_id=${item.getCategoryId()},i_id=${item.getId()})}">Удалить</a>
                        </td>
                    </tr>
                </table>

                <!--Конец раздела игр-->

            </div>
        </div>
        <div class="col"></div>
    </div>

</div>
<!--Конец-->

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

</body>
</html>